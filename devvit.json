{
  "$schema": "https://developers.reddit.com/schema/config-file.v1.json",
  "name": "hotandcold2-app",
  "post": {
    "dir": "dist/client",
    "entrypoints": {
      "default": {
        "entry": "classic.html",
        "inline": true
      }
    }
  },
  "marketingAssets": {
    "icon": "assets/icon.png"
  },
  "media": {
    "dir": "assets"
  },
  "server": {
    "dir": "dist/server",
    "entry": "index.cjs"
  },
  "forms": {
    "queueAddForm": "/internal/form/queue/add",
    "queueClearForm": "/internal/form/queue/clear",
    "postCreateForm": "/internal/form/post-create",
    "notificationsManageForm": "/internal/form/notifications/manage",
    "notificationsSendSingleForm": "/internal/form/notifications/send-single",
    "cleanupUsersForm": "/internal/form/admin/cleanup-users"
  },
  "menu": {
    "items": [
      {
        "label": "[queue] Add to queue",
        "description": "classic",
        "forUserType": "moderator",
        "location": "subreddit",
        "endpoint": "/internal/menu/add"
      },
      {
        "label": "[queue] Clear queue",
        "description": "classic",
        "forUserType": "moderator",
        "location": "subreddit",
        "endpoint": "/internal/menu/clear"
      },
      {
        "label": "[queue] Get size",
        "description": "classic",
        "forUserType": "moderator",
        "location": "subreddit",
        "endpoint": "/internal/menu/size"
      },
      {
        "label": "[queue] Peek next 3",
        "description": "classic",
        "forUserType": "moderator",
        "location": "subreddit",
        "endpoint": "/internal/menu/peek"
      },
      {
        "label": "[queue] Get contents via DM",
        "forUserType": "moderator",
        "location": "subreddit",
        "description": "classic",
        "endpoint": "/internal/menu/dm"
      },
      {
        "label": "[queue] Post next",
        "forUserType": "moderator",
        "location": "subreddit",
        "description": "classic",
        "endpoint": "/internal/menu/post-next"
      },
      {
        "label": "[migrate] Backfill secret words 1-25",
        "forUserType": "moderator",
        "location": "subreddit",
        "description": "classic",
        "endpoint": "/internal/menu/migrate-secret-words"
      },
      {
        "label": "[stats] Opted into reminders",
        "forUserType": "moderator",
        "location": "subreddit",
        "endpoint": "/internal/menu/reminders-count"
      },
      {
        "label": "[stats] Joined subreddit",
        "forUserType": "moderator",
        "location": "subreddit",
        "endpoint": "/internal/menu/joined-count"
      },
      {
        "label": "[stats] Export last 30 days",
        "forUserType": "moderator",
        "location": "subreddit",
        "description": "classic",
        "endpoint": "/internal/menu/export-last-30-days"
      },
      {
        "label": "[notifications] Manage queue",
        "forUserType": "moderator",
        "location": "subreddit",
        "description": "classic",
        "endpoint": "/internal/menu/notifications/manage"
      },
      {
        "label": "[notifications] Dry run latest",
        "forUserType": "moderator",
        "location": "subreddit",
        "description": "classic",
        "endpoint": "/internal/menu/notifications/dry-run-latest"
      },
      {
        "label": "[notifications] Send single",
        "forUserType": "moderator",
        "location": "subreddit",
        "description": "classic",
        "endpoint": "/internal/menu/notifications/send-single"
      },
      {
        "label": "[ops] Sync PostHog user properties",
        "forUserType": "moderator",
        "location": "subreddit",
        "endpoint": "/internal/menu/analytics/sync-user-props"
      },
      {
        "label": "[migrate] Timezones: Offsets â†’ IANA",
        "forUserType": "moderator",
        "location": "subreddit",
        "description": "classic",
        "endpoint": "/internal/menu/timezones/migrate-to-iana"
      },
      {
        "label": "[ops] Remove reminders/timezones",
        "forUserType": "moderator",
        "location": "subreddit",
        "description": "classic",
        "endpoint": "/internal/menu/admin/cleanup-users"
      }
    ]
  },
  "scheduler": {
    "tasks": {
      "create-new-challenge": {
        "cron": "0 12 * * *",
        "endpoint": "/internal/scheduler/create-new-challenge",
        "data": {}
      },
      "update-post-data": {
        "cron": "*/5 * * * *",
        "endpoint": "/internal/scheduler/update-post-data",
        "data": {}
      },
      "notifications-backup-sweep": {
        "cron": "10 * * * *",
        "endpoint": "/internal/scheduler/notifications-backup-sweep",
        "data": {}
      },
      "notifications-send-group": "/internal/scheduler/notifications-send-group",
      "posthog-user-prop-sync": {
        "cron": "0 3 * * *",
        "endpoint": "/internal/scheduler/posthog-user-prop-sync",
        "data": { "stage": "reminders", "cursor": 0, "limit": 1000 }
      }
    }
  },
  "triggers": {
    "onCommentCreate": "/internal/triggers/on-comment-create"
  },
  "permissions": {
    "reddit": {
      "asUser": ["SUBMIT_COMMENT", "SUBSCRIBE_TO_SUBREDDIT"]
    },
    "http": {
      "domains": [
        "us.i.posthog.com",
        "us-assets.i.posthog.com",
        "api.openai.com",
        "jbbhyxtpholdwrxencjx.supabase.co"
      ],
      "enable": true
    }
  },
  "settings": {
    "global": {
      "SUPABASE_SECRET": {
        "label": "Supabase Secret",
        "isSecret": true,
        "type": "string"
      },
      "OPEN_AI_API_KEY": {
        "label": "OpenAI API Key",
        "isSecret": true,
        "type": "string"
      }
    },
    "subreddit": {
      "flairId": {
        "type": "string",
        "label": "Game Flair ID",
        "helpText": "Flair ID for the game tag e.g. d7441bc0-a089-11f0-8b7d-16490fd4785c"
      }
    }
  },
  "dev": {
    "subreddit": "hotandcold2_app_dev"
  }
}
