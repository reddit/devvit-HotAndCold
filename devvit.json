{
  "$schema": "https://developers.reddit.com/schema/config-file.v1.json",
  "name": "hotandcold2-app",
  "post": {
    "dir": "dist/client",
    "entrypoints": {
      "default": {
        "entry": "classic.html",
        "inline": true
      }
    }
  },
  "marketingAssets": {
    "icon": "assets/icon.png"
  },
  "media": {
    "dir": "assets"
  },
  "server": {
    "dir": "dist/server",
    "entry": "index.cjs"
  },
  "forms": {
    "queueAddForm": "/internal/form/queue/add",
    "queueClearForm": "/internal/form/queue/clear",
    "postCreateForm": "/internal/form/post-create",
    "notificationsManageForm": "/internal/form/notifications/manage",
    "notificationsSendSingleForm": "/internal/form/notifications/send-single",
    "nukeUsersForm": "/internal/form/admin/nuke-users",
    "cleanupCacheForm": "/internal/form/admin/cleanup-cache",
    "migrateChallengeProgressForm": "/internal/form/admin/migrate-challenge-progress-compression",
    "migrateUserCacheForm": "/internal/form/admin/migrate-user-cache-compression",
    "migrateUserGuessForm": "/internal/form/admin/migrate-user-guess-compression",
    "migrateNotificationsForm": "/internal/form/admin/migrate-notifications-compression",
    "statsPlayersForm": "/internal/form/stats/players-count",
    "peekUserGuessForm": "/internal/form/debug/peek-guess"
  },
  "menu": {
    "items": [
      {
        "label": "[queue] Add to queue",
        "description": "classic",
        "forUserType": "moderator",
        "location": "subreddit",
        "endpoint": "/internal/menu/add"
      },
      {
        "label": "[queue] Clear queue",
        "description": "classic",
        "forUserType": "moderator",
        "location": "subreddit",
        "endpoint": "/internal/menu/clear"
      },
      {
        "label": "[queue] Get size",
        "description": "classic",
        "forUserType": "moderator",
        "location": "subreddit",
        "endpoint": "/internal/menu/size"
      },
      {
        "label": "[queue] Peek next 3",
        "description": "classic",
        "forUserType": "moderator",
        "location": "subreddit",
        "endpoint": "/internal/menu/peek"
      },
      {
        "label": "[queue] Get contents via DM",
        "forUserType": "moderator",
        "location": "subreddit",
        "description": "classic",
        "endpoint": "/internal/menu/dm"
      },
      {
        "label": "[queue] Post next",
        "forUserType": "moderator",
        "location": "subreddit",
        "description": "classic",
        "endpoint": "/internal/menu/post-next"
      },
      {
        "label": "[migrate] Backfill secret words 1-25",
        "forUserType": "moderator",
        "location": "subreddit",
        "description": "classic",
        "endpoint": "/internal/menu/migrate-secret-words"
      },
      {
        "label": "[stats] Opted into reminders",
        "forUserType": "moderator",
        "location": "subreddit",
        "endpoint": "/internal/menu/reminders-count"
      },
      {
        "label": "[stats] Joined subreddit",
        "forUserType": "moderator",
        "location": "subreddit",
        "endpoint": "/internal/menu/joined-count"
      },
      {
        "label": "[stats] Export last 30 days",
        "forUserType": "moderator",
        "location": "subreddit",
        "description": "classic",
        "endpoint": "/internal/menu/export-last-30-days"
      },
      {
        "label": "[notifications] Manage queue",
        "forUserType": "moderator",
        "location": "subreddit",
        "description": "classic",
        "endpoint": "/internal/menu/notifications/manage"
      },
      {
        "label": "[notifications] Dry run latest",
        "forUserType": "moderator",
        "location": "subreddit",
        "description": "classic",
        "endpoint": "/internal/menu/notifications/dry-run-latest"
      },
      {
        "label": "[notifications] Send single",
        "forUserType": "moderator",
        "location": "subreddit",
        "description": "classic",
        "endpoint": "/internal/menu/notifications/send-single"
      },
      {
        "label": "[ops] Sync PostHog user properties",
        "forUserType": "moderator",
        "location": "subreddit",
        "endpoint": "/internal/menu/analytics/sync-user-props"
      },
      {
        "label": "[ops] Warm user cache",
        "forUserType": "moderator",
        "location": "subreddit",
        "description": "classic",
        "endpoint": "/internal/menu/users/warm-cache"
      },
      {
        "label": "[ops] Migrate word config gzip",
        "forUserType": "moderator",
        "location": "subreddit",
        "description": "classic",
        "endpoint": "/internal/menu/word-config/migrate-compression"
      },
      {
        "label": "[ops] Cleanup user cache",
        "forUserType": "moderator",
        "location": "subreddit",
        "description": "classic",
        "endpoint": "/internal/menu/admin/cleanup-cache"
      },
      {
        "label": "[ops] Toggle cleanup cancel flag",
        "forUserType": "moderator",
        "location": "subreddit",
        "description": "classic",
        "endpoint": "/internal/menu/admin/toggle-cleanup-cancel"
      },
      {
        "label": "[migrate] Timezones: Offsets â†’ IANA",
        "forUserType": "moderator",
        "location": "subreddit",
        "description": "classic",
        "endpoint": "/internal/menu/timezones/migrate-to-iana"
      },
      {
        "label": "[ops] Nuke reminders/timezones",
        "forUserType": "moderator",
        "location": "subreddit",
        "description": "classic",
        "endpoint": "/internal/menu/admin/nuke-users"
      },
      {
        "label": "[ops] Migrate Reminders to T2",
        "forUserType": "moderator",
        "location": "subreddit",
        "description": "classic",
        "endpoint": "/internal/menu/admin/migrate-reminders-t2"
      },
      {
        "label": "[ops] Migrate UserGuess compression",
        "forUserType": "moderator",
        "location": "subreddit",
        "endpoint": "/internal/menu/admin/migrate-user-guess-compression"
      },
      {
        "label": "[ops] Toggle UserGuess migration",
        "forUserType": "moderator",
        "location": "subreddit",
        "endpoint": "/internal/menu/admin/migrate-user-guess-compression/toggle"
      },
      {
        "label": "[ops] Migrate ChallengeProgress compression",
        "forUserType": "moderator",
        "location": "subreddit",
        "endpoint": "/internal/menu/admin/migrate-challenge-progress-compression"
      },
      {
        "label": "[ops] Toggle ChallengeProgress migration",
        "forUserType": "moderator",
        "location": "subreddit",
        "endpoint": "/internal/menu/admin/migrate-challenge-progress-compression/toggle"
      },
      {
        "label": "[ops] Migrate User cache compression",
        "forUserType": "moderator",
        "location": "subreddit",
        "endpoint": "/internal/menu/admin/migrate-user-cache-compression"
      },
      {
        "label": "[ops] Toggle User cache migration",
        "forUserType": "moderator",
        "location": "subreddit",
        "endpoint": "/internal/menu/admin/migrate-user-cache-compression/toggle"
      },
      {
        "label": "[ops] Migrate Notifications compression",
        "forUserType": "moderator",
        "location": "subreddit",
        "endpoint": "/internal/menu/admin/migrate-notifications-compression"
      },
      {
        "label": "[ops] Toggle Notifications migration",
        "forUserType": "moderator",
        "location": "subreddit",
        "endpoint": "/internal/menu/admin/migrate-notifications-compression/toggle"
      },
      {
        "label": "[ops] Drop IdToUsernameKey",
        "forUserType": "moderator",
        "location": "subreddit",
        "endpoint": "/internal/menu/admin/drop-id-to-username-key"
      },
      {
        "label": "[stats] Players count for challenge",
        "forUserType": "moderator",
        "location": "subreddit",
        "description": "classic",
        "endpoint": "/internal/menu/stats/players-count"
      },
      {
        "label": "[stats] Total guesses (All Time)",
        "forUserType": "moderator",
        "location": "subreddit",
        "description": "classic",
        "endpoint": "/internal/menu/stats/total-guesses"
      },
      {
        "label": "[debug] Peek user guess (raw/decompressed)",
        "forUserType": "moderator",
        "location": "subreddit",
        "description": "classic",
        "endpoint": "/internal/menu/debug/peek-guess"
      }
    ]
  },
  "scheduler": {
    "tasks": {
      "create-new-challenge": {
        "cron": "0 12 * * *",
        "endpoint": "/internal/scheduler/create-new-challenge",
        "data": {}
      },
      "create-new-challenge-retry-1": {
        "cron": "5 12 * * *",
        "endpoint": "/internal/scheduler/create-new-challenge-retry",
        "data": {}
      },
      "create-new-challenge-retry-2": {
        "cron": "15 12 * * *",
        "endpoint": "/internal/scheduler/create-new-challenge-retry",
        "data": {}
      },
      "create-new-challenge-retry-3": {
        "cron": "30 12 * * *",
        "endpoint": "/internal/scheduler/create-new-challenge-retry",
        "data": {}
      },
      "update-post-data": {
        "cron": "*/5 * * * *",
        "endpoint": "/internal/scheduler/update-post-data",
        "data": {}
      },
      "notifications-backup-sweep": {
        "cron": "10 * * * *",
        "endpoint": "/internal/scheduler/notifications-backup-sweep",
        "data": {}
      },
      "notifications-send-group": "/internal/scheduler/notifications-send-group",
      "users-warm-cache": "/internal/scheduler/users-warm-cache",
      "users-clean-reminderless-cache": "/internal/scheduler/users-clean-reminderless-cache",
      "migrate-user-guess-compression": "/internal/scheduler/migrate-user-guess-compression",
      "migrate-user-cache-compression": "/internal/scheduler/migrate-user-cache-compression",
      "migrate-challenge-progress-compression": "/internal/scheduler/migrate-challenge-progress-compression",
      "migrate-notifications-compression": "/internal/scheduler/migrate-notifications-compression",
      "posthog-user-prop-sync": {
        "cron": "0 3 * * *",
        "endpoint": "/internal/scheduler/posthog-user-prop-sync",
        "data": { "cursor": 0, "limit": 1000 }
      },
      "notifications-enqueue-new-challenge": "/internal/scheduler/notifications-enqueue-new-challenge"
    }
  },
  "triggers": {
    "onCommentCreate": "/internal/triggers/on-comment-create"
  },
  "permissions": {
    "reddit": {
      "asUser": ["SUBMIT_COMMENT", "SUBSCRIBE_TO_SUBREDDIT"]
    },
    "http": {
      "domains": [
        "us.i.posthog.com",
        "us-assets.i.posthog.com",
        "api.openai.com",
        "jbbhyxtpholdwrxencjx.supabase.co"
      ],
      "enable": true
    }
  },
  "settings": {
    "global": {
      "SUPABASE_SECRET": {
        "label": "Supabase Secret",
        "isSecret": true,
        "type": "string"
      },
      "OPEN_AI_API_KEY": {
        "label": "OpenAI API Key",
        "isSecret": true,
        "type": "string"
      }
    },
    "subreddit": {
      "flairId": {
        "type": "string",
        "label": "Game Flair ID",
        "helpText": "Flair ID for the game tag e.g. d7441bc0-a089-11f0-8b7d-16490fd4785c"
      }
    }
  },
  "dev": {
    "subreddit": "hotandcold2_app_dev"
  }
}
